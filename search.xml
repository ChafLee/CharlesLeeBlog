<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Hexo Centos7部署</title>
    <url>/2020/08/08/Hexo%20Centos7%E9%83%A8%E7%BD%B2/</url>
    <content><![CDATA[<h2 id="一、安装Node-js"><a href="#一、安装Node-js" class="headerlink" title="一、安装Node.js"></a>一、安装Node.js</h2><h3 id="使用EPEL安装"><a href="#使用EPEL安装" class="headerlink" title="使用EPEL安装"></a>使用EPEL安装</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.先确认系统是否已经安装epel-release包</span></span><br><span class="line"><span class="variable">$yum</span> info epel-release</span><br><span class="line"><span class="comment"># 2.若输出相关信息，则已安装，否则执行下面命令安装</span></span><br><span class="line"><span class="variable">$sudo</span> yum install epel-release</span><br><span class="line"><span class="comment"># 3.安装Node.js</span></span><br><span class="line"><span class="variable">$sudo</span> yum install nodejs</span><br><span class="line"><span class="comment"># 4.检验版本</span></span><br><span class="line"><span class="variable">$node</span> -v</span><br></pre></td></tr></table></figure>
<h2 id="二、安装git"><a href="#二、安装git" class="headerlink" title="二、安装git"></a>二、安装git</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.卸载旧版本</span></span><br><span class="line"><span class="variable">$yum</span> remove git</span><br><span class="line"><span class="comment"># 2.安装yum源的Git版本</span></span><br><span class="line"><span class="variable">$yum</span> install -y git</span><br><span class="line"><span class="comment"># 3.查看版本</span></span><br><span class="line"><span class="variable">$git</span> version</span><br></pre></td></tr></table></figure>
<h3 id="配置全局环境变量"><a href="#配置全局环境变量" class="headerlink" title="配置全局环境变量"></a>配置全局环境变量</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1. 编辑配置文件</span></span><br><span class="line"><span class="variable">$vim</span> /etc/profile</span><br><span class="line"><span class="comment"># 2. 在 /etc/profile 文件中末尾追加以下内容(相信你肯定已熟练掌握 Vim 使用啦)</span></span><br><span class="line"><span class="variable">$export</span> PATH=<span class="variable">$PATH</span>:/usr/local/git/bin</span><br><span class="line"><span class="comment"># 3. 回到终端, 刷新配置</span></span><br><span class="line"><span class="variable">$source</span> /etc/profile</span><br><span class="line"><span class="comment"># 4. 查看版本</span></span><br><span class="line"><span class="variable">$git</span> version </span><br></pre></td></tr></table></figure>
<h2 id="三、安装Hexo"><a href="#三、安装Hexo" class="headerlink" title="三、安装Hexo"></a>三、安装Hexo</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.安装npm</span></span><br><span class="line"><span class="variable">$yum</span> install npm</span><br><span class="line"><span class="comment"># 2.安装hexo</span></span><br><span class="line"><span class="variable">$npm</span> install -g hexo-cli</span><br><span class="line"><span class="comment"># 3.创建hexo项目文件夹</span></span><br><span class="line"><span class="variable">$mkdir</span> /usr/local/hexo</span><br><span class="line"><span class="comment"># 4.hexo初始化</span></span><br><span class="line"><span class="variable">$cd</span> /usr/local/hexo</span><br><span class="line"><span class="variable">$npx</span> hexo init</span><br><span class="line"><span class="comment"># 5.启动服务</span></span><br><span class="line"><span class="variable">$npx</span> hexo server</span><br><span class="line"><span class="comment"># 后台启动</span></span><br><span class="line"><span class="variable">$nohup</span> npx hexo server &gt; log.out 2&gt;&amp;1 &amp;</span><br><span class="line"><span class="comment"># 后台启动后使用exit退出ssh</span></span><br></pre></td></tr></table></figure>
<h2 id="四、配置Hexo主题"><a href="#四、配置Hexo主题" class="headerlink" title="四、配置Hexo主题"></a>四、配置Hexo主题</h2><p><a href="https://async-docs.imalun.com/">Async主题</a>  点击下载 <a href="https://github.com/MaLuns/hexo-theme-async">GitHUb</a></p>
<ol>
<li>下载源码包至服务器</li>
<li>yum安装zip解压缩工具并解压<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="variable">$yum</span> install -y zip unzip</span><br><span class="line"><span class="variable">$unzip</span> -d /usr/local/hexo/themes async.zip</span><br></pre></td></tr></table></figure></li>
<li>npm安装主题必须的组件<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="variable">$npm</span> install --save hexo-theme-async hexo-renderer-less hexo-renderer-ejs</span><br></pre></td></tr></table></figure></li>
<li>修改hexo目录下的_config.yml，将 <code>theme: landscape</code> 修改为 <code>theme: async</code></li>
<li>重启hexo服务</li>
</ol>
]]></content>
      <categories>
        <category>安装部署</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>linux</tag>
        <tag>centos</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo部署Github空白页问题</title>
    <url>/2023/02/12/Hexo%E9%83%A8%E7%BD%B2Github%E7%A9%BA%E7%99%BD%E9%A1%B5%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h2 id="记录一下Hexo部署到Github-pages访问页面显示空白问题"><a href="#记录一下Hexo部署到Github-pages访问页面显示空白问题" class="headerlink" title="记录一下Hexo部署到Github pages访问页面显示空白问题"></a>记录一下Hexo部署到Github pages访问页面显示空白问题</h2><p>在服务器上安装部署Hexo后，访问没问题，然后偶然看到有博主的网站域名是github.io结尾的，于是在一番探索下尝试将静态文件部署到github pages进行托管，结果在访问时确实空白页面，百度之后大多数都是说index.html是空白的，但我的index文件确实是有内容的，但依旧是空白显示，我也尝试将主题切换为原始<code>landscape</code> 主题，但并没有任何作用，最后看到有说是node版本问题，我的Node版本是v16.18.1，在一番百度下大概率是因为node版本过高的原因</p>
<h3 id="卸载npm"><a href="#卸载npm" class="headerlink" title="卸载npm"></a>卸载npm</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo npm uninstall npm -g</span><br></pre></td></tr></table></figure>
<h3 id="卸载node"><a href="#卸载node" class="headerlink" title="卸载node"></a>卸载node</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum remove nodejs npm -y</span><br></pre></td></tr></table></figure>
<p>看看是否有残留<br>进入 /usr/local/lib 删除所有 node 和 node_modules文件夹</p>
<p>进入 /usr/local/include 删除所有 node 和 node_modules 文件夹</p>
<p>进入 /usr/local/bin 删除 node 的可执行文件</p>
<h3 id="安装新版本node"><a href="#安装新版本node" class="headerlink" title="安装新版本node"></a>安装新版本node</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -sL https://rpm.nodesource.com/setup_12.x | bash -</span><br></pre></td></tr></table></figure>
<p>我需要的是nodejs12.x的版本，所以这里是setup_12.x</p>
<p>最后执行安装命令</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo yum -y install nodejs</span><br><span class="line"><span class="comment"># 查看node版本</span></span><br><span class="line">node -v</span><br><span class="line">V12.22.12</span><br></pre></td></tr></table></figure>
<h3 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install</span><br><span class="line"><span class="comment"># 由于主题需要，需安装hexo-renderer-less hexo-renderer-ejs</span></span><br><span class="line">npm install hexo-renderer-less hexo-renderer-ejs --save</span><br><span class="line"><span class="comment"># 安装Hexo部署插件</span></span><br><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<h3 id=""><a href="#" class="headerlink" title=""></a></h3><h3 id="配置部署信息"><a href="#配置部署信息" class="headerlink" title="配置部署信息"></a>配置部署信息</h3><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 编辑_config.yml的deploy参数</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/xxx/xxx.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 部署</span></span><br><span class="line">npx hexo clean</span><br><span class="line">npx hexo generate</span><br><span class="line">npx hexo deploy</span><br></pre></td></tr></table></figure>

<h2 id="问题记录"><a href="#问题记录" class="headerlink" title="问题记录"></a>问题记录</h2><ol>
<li><p><code>npm install</code> 时提示以下信息</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.3.2 (node_modules/fsevents):</span><br><span class="line">npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform <span class="keyword">for</span> fsevents@2.3.2: wanted &#123;<span class="string">&quot;os&quot;</span>:<span class="string">&quot;darwin&quot;</span>,<span class="string">&quot;arch&quot;</span>:<span class="string">&quot;any&quot;</span>&#125; (current: &#123;<span class="string">&quot;os&quot;</span>:<span class="string">&quot;linux&quot;</span>,<span class="string">&quot;arch&quot;</span>:<span class="string">&quot;x64&quot;</span>&#125;)</span><br></pre></td></tr></table></figure>
<p>只需在命令后加 <code>--no-optional</code> 参数即可</p>
</li>
<li><p>安装nodejs-v12版本后，执行 <code>npx hexo clean</code> 时报错</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">INFO  Validating config</span><br><span class="line">ERROR &#123;</span><br><span class="line">  err: /usr/local/hexo/themes/async/scripts/helper/tag.js:21</span><br><span class="line">      const <span class="built_in">type</span> = hexo.theme.config?.assets?.icons?.<span class="built_in">type</span> || <span class="string">&#x27;font&#x27;</span></span><br><span class="line">                                     ^</span><br><span class="line">  </span><br><span class="line">  SyntaxError: Unexpected token <span class="string">&#x27;.&#x27;</span></span><br><span class="line">      at new Script (vm.js:88:7)</span><br><span class="line">      at createScript (vm.js:261:10)</span><br><span class="line">      at runInThisContext (vm.js:309:10)</span><br><span class="line">      at /usr/local/hexo/node_modules/hexo/lib/hexo/index.js:303:18</span><br><span class="line">      at tryCatcher (/usr/local/hexo/node_modules/bluebird/js/release/util.js:16:23)</span><br><span class="line">      at Promise._settlePromiseFromHandler (/usr/local/hexo/node_modules/bluebird/js/release/promise.js:547:31)</span><br><span class="line">      at Promise._settlePromise (/usr/local/hexo/node_modules/bluebird/js/release/promise.js:604:18)</span><br><span class="line">      at Promise._settlePromise0 (/usr/local/hexo/node_modules/bluebird/js/release/promise.js:649:10)</span><br><span class="line">      at Promise._settlePromises (/usr/local/hexo/node_modules/bluebird/js/release/promise.js:729:18)</span><br><span class="line">      at _drainQueueStep (/usr/local/hexo/node_modules/bluebird/js/release/async.js:93:12)</span><br><span class="line">      at _drainQueue (/usr/local/hexo/node_modules/bluebird/js/release/async.js:86:9)</span><br><span class="line">      at Async._drainQueues (/usr/local/hexo/node_modules/bluebird/js/release/async.js:102:5)</span><br><span class="line">      at Immediate.Async.drainQueues [as _onImmediate] (/usr/local/hexo/node_modules/bluebird/js/release/async.js:15:14)</span><br><span class="line">      at processImmediate (internal/timers.js:461:21)</span><br><span class="line">&#125; Script load failed: %s themes/async/scripts/helper/tag.js</span><br></pre></td></tr></table></figure>
<p>原因就是v12版本的node也不兼容😅</p>
</li>
</ol>
<p>但在我重新安装其他版本node时，执行切换node源版本命令时，出现一直还在重新安装v12版本且安装失败的错误，可以尝试清除一下yum源 <code>yum clean all</code> ，再尝试重新安装</p>
]]></content>
      <categories>
        <category>安装部署</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>linux</tag>
        <tag>centos</tag>
      </tags>
  </entry>
</search>
